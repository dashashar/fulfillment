# Fulfillment and Shipment Service for Wildberries

## Описание проекта

RESTful-сервис предназначен для формирования заявок на фулфилмент и отгрузку товаров, предоставляемых сторонней компанией.

Сервис интегрируется с API Wildberries, хранит данные о товарах и заявках в локальной базе данных, выгружает заявки в Google Sheets для администрирования.

## Технологии

- Java 17
- Gradle
- Spring Boot  
- Spring Security  
- Spring Data JPA  
- PostgreSQL с миграциями Liquibase  
- Google Sheets API  
- Telegram Mini App для аутентификации  
- Docker и Docker Compose  

## Основные возможности

- Регистрация через Telegram Mini App (используется init data для аутентификации)
- Загрузка товаров продавца через API Wildberries
- Обновление информации о товарах в локальной базе
- Поиск товаров по наименованию, баркоду и артиклю
- Создание заявок на фулфилмент и отгрузку, просмотр заявок
- Автоматическая выгрузка новых заявок в Google Sheets
- Обновление статуса отгрузки в локальной базе при изменении в Google Sheets

## Документация API

Проект содержит спецификацию OpenAPI в файле `openapi.yml`, описывающую все REST-эндпоинты, параметры и модели данных с примерами.
Можно вставить содержимое файла в онлайн-редактор [Swagger Editor](https://forge.etsi.org/swagger/editor/) для визуального просмотра.

## Настройка программы

Для настройки нужно:

1. Создать проект в Google Cloud, сервисный аккаунт и настроить credentials
2. Создать Google таблицу для выгрузки данных и добавить в нее сервисный аккаунт
3. Настроить триггер в Google Sheets для отправки изменений статусов обратно в сервис  
4. Создать Telegram бота для Mini App аутентификации  
5. Настроить переменные окружения согласно файлу `.env.example`:

## Деплой и инфраструктура

- Для автоматического деплоя используется GitLab CI/CD с файлом `.gitlab-ci.yml`
- Требуется заранее настроить внутреннюю сеть докера и запустить контейнер с базой данных PostgreSQL в этой сети
- Также создать папку /opt/my-project на сервере и поместить в нее файл .env
- Pipeline запускается при пуше в ветки `main` или `develop` и состоит из трех стадий:

1. Сборка JAR файла с помощью Gradle  
2. Публикация Docker образа в GitLab Registry  
3. Деплой приложения запуском Docker образа на сервере  
